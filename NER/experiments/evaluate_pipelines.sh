#!/bin/bash

# Create output directory
mkdir -p results/TRAM
mkdir -p results/Bosch
echo "Running evaluation..."

# Evaluate pipelines - TRAM
## Full pipeline
python3 -m spacy_extensions evaluate \
    output/TRAM/full/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/full.txt
    
## No POS pipeline
python3 -m spacy_extensions evaluate \
    output/TRAM/pos/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/pos.txt
    

## No lemmatization pipeline
python3 -m spacy_extensions evaluate \
    output/TRAM/lemma/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/lemma.txt

## No related words pipeline
python3 -m spacy_extensions evaluate \
    output/TRAM/related_words/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/related_words.txt

## No parsing pipeline
python3 -m spacy_extensions evaluate \
    output/TRAM/parser_exact/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/parser_exact.txt

## Naive
python3 -m spacy_extensions evaluate \
    output/TRAM/naive/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/naive.txt

## Very naive
python3 -m spacy_extensions evaluate \
    output/TRAM/very_naive/*.json \
    ../data/TRAM/labels.json \
    --filter 'T1003.001|T1005|T1012|T1016|T1021.001|T1027|T1033|T1036.005|T1041|T1047|T1053.005|T1055|T1056.001|T1057|T1059.003|T1068|T1070.004|T1071.001|T1072|T1074.001|T1078|T1082|T1083|T1090|T1095|T1105|T1106|T1110|T1112|T1113|T1140|T1190|T1204.002|T1210|T1218.011|T1219|T1484.001|T1518.001|T1543.003|T1547.001|T1548.002|T1552.001|T1557.001|T1562.001|T1564.001|T1566.001|T1569.002|T1570|T1573.001|T1574.002' \
    > results/TRAM/very_naive.txt




# Evaluate pipelines - Bosch
## Full pipeline
python3 -m spacy_extensions evaluate \
    output/Bosch/full/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/full.txt
    
## No POS pipeline
python3 -m spacy_extensions evaluate \
    output/Bosch/pos/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/pos.txt
    

## No lemmatization pipeline
python3 -m spacy_extensions evaluate \
    output/Bosch/lemma/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/lemma.txt

## No related words pipeline
python3 -m spacy_extensions evaluate \
    output/Bosch/related_words/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/related_words.txt

## No parsing pipeline
python3 -m spacy_extensions evaluate \
    output/Bosch/parser_exact/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/parser_exact.txt

## Naive
python3 -m spacy_extensions evaluate \
    output/Bosch/naive/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/naive.txt

## Very naive
python3 -m spacy_extensions evaluate \
    output/Bosch/very_naive/*.json \
    ../data/top_k/BoschAnnoCTR/Label/test-only-techniques.json \
    --filter 'T1001|T1003|T1005|T1012|T1016|T1018|T1021|T1027|T1033|T1036|T1041|T1046|T1047|T1048|T1049|T1053|T1055|T1056|T1057|T1059|T1068|T1070|T1071|T1074|T1078|T1082|T1083|T1087|T1098|T1102|T1105|T1106|T1110|T1112|T1113|T1114|T1115|T1124|T1125|T1132|T1134|T1135|T1137|T1140|T1185|T1189|T1190|T1195|T1203|T1204|T1210|T1218|T1437|T1482|T1486|T1491|T1496|T1497|T1499|T1518|T1528|T1539|T1547|T1552|T1555|T1557|T1560|T1562|T1564|T1566|T1567|T1568|T1573|T1574|T1583|T1586|T1589|T1592|T1606|T1608|T1614|T1620' \
    > results/Bosch/very_naive.txt


echo "Evaluation complete!"